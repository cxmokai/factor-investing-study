# 因子投资讲义编写指南

> 本文档参照「金融知识讲义编写指南」和「数学讲义编写指南」的方法论，针对因子投资方法论内容做适配。
> 用于复现 Day 22-35 的因子投资讲义。

---

## 一、编写流程

```
第1步：确定当天内容范围
  └→ 查看「因子投资学习计划.md」中该天的模块、知识点、对应石川章节

第2步：列出所有知识点
  └→ 从石川对应章节和论文中提取核心方法论
  └→ 只保留"能指导实操"的内容，跳过纯学术讨论

第3步：排列知识点顺序
  └→ 原则：直觉→方法→步骤→评估→陷阱
  └→ 例：Day 22 先讲"因子是什么"（直觉），再讲"排序法怎么做"（步骤）

第4步：为每个知识点编写内容（见下方"单个知识点的写法"）

第5步：编写自测题（概念题 + 方法题各半）

第6步：检查完整性
  └→ 读完讲义后，是否能独立执行该方法？如果不能，说明步骤不够具体
  └→ 所有数值例子是否可以手算验证
  └→ 所有 Mermaid 图是否语法正确
```

---

## 二、文档结构模板

```markdown
# Day N：标题

> **总时长：** 2 小时
> **节奏：** 每 50 分钟休息 10 分钟
> **今日目标：** 一句话说清楚今天学完能做什么
> **本文是完整讲义，包含所有知识点，不需要翻阅其他资料**

---

## 时间表

（精确到分钟的时间分配）

---

## 第一节：xxx（50 分钟）

### 一、第一个大主题
#### 1.1 小知识点
（内容）

### 第一节完成检查
- [ ] 检查项 1（能力型：能用自己的话描述 xxx 的步骤）
- [ ] 检查项 2（判断型：给一个场景，能判断 xxx）

**休息 10 分钟。**

---

## 第二节：xxx（50 分钟）

### 二、第二个大主题
（内容）

### 第二节完成检查
- [ ] 检查项

---

## 收尾：自测（10 分钟）

（自测题 + 评分标准）

---

## 今天不需要记住的内容

（降低焦虑，明确边界）

---

## 明天预告

（1-3 句话，制造期待）
```

---

## 三、单个知识点的写法

因子投资讲义的知识点以**方法论**为核心，每个知识点按以下顺序组织：

### 1. 一句话定义（必须）

用加粗的一句话给出最简定义。

> **投资组合排序法 = 按因子值把股票分组，看哪组收益高、哪组收益低。**

### 2. 为什么要学这个（必须）

在因子投资的完整流程中，这个方法处于哪个环节。

> 排序法是因子研究的第一步——在用复杂回归模型之前，先用最直觉的方式看看因子是否"有用"。

### 3. 直觉解释（复杂方法必须）

把抽象方法还原成"人话"。

> 想象你是班主任，想知道"身高是否影响跑步速度"。最直觉的方法：把全班按身高分成两组，比较两组的平均百米成绩。如果矮个组显著更快（或更慢），说明身高确实有影响。排序法就是这个逻辑。

直觉解释的原则：
- 可以用生活类比（和金融讲义类似），因为方法论本身是抽象的
- 类比的结构必须和原方法对应
- 3 句话以内说完

### 4. 具体步骤（方法论型知识点必须）

用编号步骤清晰列出"怎么做"。这是因子投资讲义区别于金融/数学讲义的核心元素。

```
步骤 1：在每个月末，计算所有股票的因子值（如 PE）
步骤 2：按因子值从小到大排序
步骤 3：分成 N 组（通常 5 组或 10 组）
步骤 4：持有每组一个月，记录各组收益率
步骤 5：每月重复，得到各组的月收益率时间序列
步骤 6：计算各组的平均收益率
步骤 7：多空组合收益 = 第1组 - 第N组
步骤 8：对多空收益做 t 检验
```

步骤的原则：
- 每一步只做一件事
- 步骤之间没有歧义——另一个人照着做能得到相同结果
- 标出关键决策点（"通常 5 组或 10 组"）

### 5. 手算例子（涉及计算的方法必须）

用小规模数据（10 只股票、3 个月）走完整个流程。

> **手算例子的规模：**
> - 股票数：10 只（能排序、能分组）
> - 时间段：3 个月（能算均值和 t 值的直觉）
> - 因子数：1 个（先单因子，多因子留给后续天）

手算例子的原则：
- 数字设计得让结论明显（但不要太夸张）
- 保留完整中间步骤
- 在例子结束后总结"从这个例子中能看出什么"

### 6. Mermaid 图（流程/关系/对比时必须）

因子投资讲义中 Mermaid 图的使用场景：

| 场景 | 图类型 | 例子 |
|------|--------|------|
| 方法流程 | `graph TD` 或 `graph LR` | 数据 → 排序 → 分组 → 收益 → 检验 |
| 因子关系 | `graph TD`（树形） | FF5 模型的因子结构 |
| 方法对比 | `graph LR` + subgraph | 排序法 vs 回归法 |
| 完整链路 | `graph TD`（大图） | 因子投资的 7 步全流程 |

Mermaid 书写注意（同前两个讲义）：
- 节点文本用双引号包裹，换行用 `<br>`
- 不要使用 emoji
- subgraph 名称不要用中文引号
- 保持简洁，单图节点不超过 10 个

### 7. 公式（涉及计算时必须）

因子投资讲义中的公式来自金融知识和数学两个计划。写法规范：

- 公式首次出现时给完整形式 + "翻译成人话"
- 如果该公式在前两个计划中已经讲过，注明"在数学 Day N 已详细讲解"，但仍给出完整公式（自包含原则）
- 重点放在"这个公式在因子投资中的具体含义"，而不是数学推导

### 8. 表格对比（有对比关系时必须）

| 维度 | 方法 A | 方法 B |
|------|--------|--------|
| 维度1 | ... | ... |

### 9. 陷阱与误区（每个方法必须）

因子投资方法论中有大量"看起来对但实际上错"的做法。每个方法讲完后，必须列出常见陷阱。

> **常见陷阱：**
> - 用未来数据排序（前视偏差）
> - 只看最好和最差两组，忽略中间组的单调性
> - 不做 Newey-West 调整就报告 t 值
> - 用同一段数据既挑选因子又检验因子（过拟合）

### 10. 回顾映射（重要方法必须）

向前连接（回顾金融/数学知识）和向后连接（预告后续应用）。

> **回顾：** 这里用到的 t 检验在 Day 16 已详细讲过。Newey-West 标准误在 Day 18 讲过。
> **预告：** 排序法得到的因子收益率，在 Day 30 会作为多因子模型的输入。

---

## 四、自测题的写法

### 格式

因子投资自测题分两类：

**概念题：**
```
自测 N：问题？
→ 你的答案：_______________
→ 正确：简短的标准答案。
```

**方法题：**
```
自测 N：给定情景，你应该怎么做？/ 这个做法有什么问题？
→ 你的答案：_______________
→ 正确：操作步骤或问题诊断。
```

### 原则

- 概念题和方法题各占一半
- 方法题侧重"判断对错"和"找出陷阱"
- 题目数量 = 学习时间（小时）× 5，即 2 小时对应约 10 道题
- 末尾给评分标准

---

## 五、写作原则

### 必须做的

1. **完全自包含**：读完讲义不需要翻石川的书。所有方法论直接写在文档里
2. **每个方法都说清"为什么这么做"**：不是只给步骤，要解释每一步的道理
3. **先直觉后步骤**：先用类比/例子建立直觉，再给具体操作步骤
4. **每个方法都有手算例子**：小规模数据走完整流程
5. **每个方法都有陷阱警告**：因子投资最容易踩坑
6. **回顾金融和数学知识**：明确告诉读者"这里用到了金融 Day N / 数学 Day N 的什么知识"
7. **标记决策点**：方法中有选择的地方（分 5 组还是 10 组？用 PE 还是 EP？），要说明常见做法和各自的优缺点

### 不能做的

1. **不写"请翻阅石川第 N 章"** — 需要的方法论直接写在讲义里
2. **不写代码** — 讲义是方法论文档，不是 Jupyter notebook；可以提及"用 pandas 实现"但不写具体代码
3. **不堆术语** — 每个术语第一次出现时必须解释
4. **不讲实践中用不到的学术细节** — 比如 GRS 检验的数学推导
5. **不用 emoji**
6. **不给没有经济学逻辑的因子** — 每个因子必须有"为什么它应该有效"的解释

---

## 六、因子投资讲义 vs 金融/数学讲义的关键差异

| 维度 | 金融讲义 | 数学讲义 | 因子投资讲义 |
|------|---------|---------|------------|
| 核心内容 | 概念和理论 | 公式和计算 | 方法论和步骤 |
| 类比来源 | 日常生活 | 几何图形 | 生活类比 + 简化金融场景 |
| 核心载体 | 文字 + Mermaid + 表格 | 公式 + 手算 + Mermaid | 步骤 + 手算例子 + Mermaid + 陷阱 |
| 例子类型 | 真实公司/市场 | 小数字手算 | 10只股票的完整流程 |
| 自测类型 | 概念理解 | 概念 + 计算 | 概念 + 方法（找错/判断） |
| 独有元素 | 小白问题预判 | 深度标记（记住/理解/知道） | 陷阱警告 + 决策点标注 |
| 知识连接 | 连接到因子投资 | 连接到因子投资 | 回顾金融/数学 + 预告后续 |

---

## 七、预判"方法论学习者"问题清单

| 问题类型 | 典型问题 | 应对方式 |
|---------|---------|---------|
| 步骤模糊 | "分组后怎么计算因子收益率？等权还是加权？" | 每一步给出明确操作，标注默认做法 |
| 参数选择 | "分 5 组还是 10 组？形成期多长？" | 给出常见做法 + "为什么"，不给唯一答案 |
| 理论脱节 | "排序法和回归法到底用哪个？" | 明确说清两者的适用场景和优劣 |
| 过度自信 | "我的因子 t=2.5，是不是发现了 alpha？" | 用多重检验、过拟合等反复提醒"不要过度乐观" |
| 实操困惑 | "书上说用 BM，但我只有 PE，能用吗？" | 说明常见指标的等价性和差异 |
| A 股特殊性 | "这些因子在 A 股也有效吗？" | 每个因子都提及 A 股实证表现 |

**规律：** 方法论学习者的核心困惑是：
1. **"具体怎么做"**——步骤不够细，不确定每一步的操作
2. **"有几种做法，选哪个"**——参数和方法有多种选择，不知道怎么决定
3. **"在 A 股/加密市场适用吗"**——美股实证结论能否迁移

---

## 八、Day 22 的实际结构（供参考）

```
第一节（50分钟）：因子投资的完整流程
├── 一、"因子"到底是什么
│   ├── 1.1 一句话定义（系统性解释收益率差异的特征）
│   ├── 1.2 从直觉到精确  ← 表格（三个精确度层次）
│   └── 1.3 经典因子速览  ← 表格（6个因子：名称、逻辑、做多/做空）
│       └→ 顺带解释"做多""做空"
├── 二、好因子的五个标准
│   ├── 2.1 五个标准  ← 表格（显著/持续/稳健/可投资/可解释）
│   ├── 2.2 为什么 t > 3.0  ← 回顾 Day 16 多重检验
│   └── 2.3 因子动物园  ← Mermaid 因果图（激励→挖掘→偏差→动物园→失效）
├── 三、因子投资的完整流程
│   ├── 3.1 七步流程  ← Mermaid 流程图 + 映射表（每步对应哪天）
│   └── 3.2 两条路线  ← 表格对比（排序法 vs 回归法）
└── 完成检查（5 项 checklist）

第二节（50分钟）：投资组合排序法
├── 四、排序法的直觉
│   ├── 4.1 生活类比（老师比较睡眠与成绩）
│   └── 4.2 核心逻辑  ← Mermaid 流程图
├── 五、排序法的完整步骤
│   ├── 5.1 步骤总览（10 步） ← 编号清单
│   └── 5.2 关键决策点  ← 表格（分组数/等权/持有期/方向）
│       └→ 顺带解释"等权"
├── 六、手算例子 ⭐⭐（10 只股票完整流程）
│   ├── 6.1 数据  ← 表格（10只股票的 PE 和下月收益）
│   ├── 6.2 排序分组  ← 表格（5组）
│   ├── 6.3 各组收益计算  ← 手算
│   ├── 6.4 多空组合收益  ← 手算
│   ├── 6.5 汇总表  ← 表格（各组收益 + 单调性观察）
│   ├── 6.6 从例子中看出什么（单调性 + 但一个月不够）
│   └── 6.7 60 个月的 t 值计算  ← 手算
├── 七、容易搞混的问题
│   ├── 7.1 A 股做空限制  ← 表格（学术 vs 实际）
│   ├── 7.2 PE vs EP  ← 表格对比
│   └── 7.3 分组数的选择  ← 表格对比
├── 八、排序法的常见陷阱 ⭐
│   └── 5 个陷阱  ← 表格（陷阱/含义/后果/避免方法）
│       └→ 重点展开前视偏差（财务数据发布滞后）
└── 完成检查（6 项 checklist）

收尾（10分钟）
├── 自测 10 道题（5 概念 + 5 方法/判断）
│   └→ 包含：找出不单调的因子、识别前视偏差、多重检验判断
├── 评分标准
├── 今天不需要记住的内容  ← 表格
└── 明天预告
```

### Day 22 编写中的关键设计决策

| 决策 | 选择 | 理由 |
|------|------|------|
| Day 22 先讲排序法还是回归法？ | 排序法 | 更直觉，几乎所有论文都先报告排序结果，是因子研究的"通用语言" |
| 手算例子用多少只股票？ | 10 只 | 够分 5 组（每组 2 只），计算量可控，但足以看出单调性 |
| 要不要写代码？ | 不写 | 讲义是方法论文档；代码在编程实践阶段写 |
| 因子用 PE 还是 EP？ | 先用 PE（更直觉），再解释为什么论文用 EP | PE 更符合小白直觉，但必须解释 EP 的优势 |
| 要不要讲 A 股做空限制？ | 要，作为"容易搞混的问题" | 这是 A 股投资者的高频困惑 |
| t 值门槛讲多深？ | 只讲 t > 3.0 的结论和原因 | 多重检验的数学细节在 Day 16 已讲，这里只需要应用 |

### Day 22 中的陷阱警告策略

因子投资讲义的独有特色是"陷阱警告"。Day 22 中使用了两种方式：

| 方式 | 例子 | 效果 |
|------|------|------|
| 集中列表 | 第八节的 5 个陷阱表格 | 形成"避坑清单"，便于查阅 |
| 嵌入式警告 | 手算例子 6.1 中标注"绝不能用 7 月的数据" | 在最容易犯错的地方即时提醒 |

后续讲义应同时使用这两种方式：每个方法讲完后集中列出陷阱，同时在容易出错的步骤处嵌入即时警告。
