# 因子投资 · 每日学习计划

> 每天 4 小时，每周 6 天学习 + 1 天休息复盘，共 16 周
> 覆盖市场：**传统金融（A股）+ 加密货币**
> 格式：`[理论 Xh + 编码 Xh]` 标注每日时间分配

### 开发环境

| 工具 | 用途 | 说明 |
|------|------|------|
| asdf | Python 版本管理 | 切换 Python 版本 |
| uv | 包管理 + 虚拟环境 | 替代 pip/conda，`uv add` 安装、`uv run` 执行 |
| Jupyter Notebook | 日常研究 | 每天一个 notebook，存放在 `code/notebooks/` |
| Git | 版本控制 | 第 4 周 Day 1 初始化，此后每周 push |

### 依赖安装时间线

按需安装，不需要一次装完：

```
第1周 Day1  uv init && uv add numpy pandas matplotlib jupyter
第1周 Day6  uv add akshare ccxt          # A股数据 + 加密货币交易所API
第2周 Day1  uv add scipy
第4周 Day1  uv add seaborn mplfinance
第4周 Day2  uv add python-binance        # Binance交易所专用API
第5周 Day2  uv add yfinance
第7周 Day1  uv add requests              # 链上数据API调用
第13周 Day2  uv add scikit-learn
第15周 Day2  uv add xgboost
第15周 Day3  uv add lightgbm
```

---

## 第一阶段：金融与数学基础（第 1-3 周）

---

### 第 1 周：市场基础 + 线性代数复习

| 天 | 时间分配 | 学习内容 | 具体任务 |
|---|---------|---------|---------|
| Day 1 | 理论 2h + 数学 1h + 编码 1h | 金融市场全貌（传统+加密）；向量与矩阵；**环境搭建** | **金融**：阅读《漫步华尔街》第1-2章，理解股票、债券、基金的本质区别；了解加密货币市场（BTC/ETH是什么、CEX vs DEX、与传统市场的异同）。**数学**：观看 3Blue1Brown《线性代数的本质》第1-3集（向量、线性组合、线性变换）。**环境搭建**：用 `uv init` + `uv add numpy pandas matplotlib jupyter` 初始化项目，启动 Jupyter Notebook 验证向量运算。📋 详见 `第01周-市场基础与线性代数/Day1-金融市场全貌与向量矩阵.md` |
| Day 2 | 理论 2h + 数学 2h | 交易机制（A股+加密）；矩阵运算 | **金融**：阅读《漫步华尔街》第3-4章，了解订单簿、限价单/市价单、撮合；A股交易规则（T+1、涨跌停）；加密交易所规则（24/7、T+0、maker/taker费率、无涨跌停）并对比两个市场。**数学**：3Blue1Brown 第4-6集（矩阵乘法、行列式、逆矩阵），在 Jupyter 中验证矩阵运算（环境已在 Day 1 搭好）。📋 详见 `第01周-市场基础与线性代数/Day2-股票交易机制与矩阵运算.md` |
| Day 3 | 理论 2h + 数学 2h | 债券与基金；矩阵进阶 | **金融**：阅读《漫步华尔街》第5-6章，了解债券（票面利率、到期收益率）、ETF与共同基金的区别。**数学**：3Blue1Brown 第7-9集（秩、零空间、列空间），手动计算一个 3x3 矩阵的秩 |
| Day 4 | 理论 2h + 数学 2h | A 股市场结构；特征值分解 | **金融**：了解 A 股交易规则（T+1、涨跌停、集合竞价）、主板/创业板/科创板/北交所的区别、指数体系（沪深300、中证500、中证1000）。**数学**：3Blue1Brown 第10-11集（特征值/特征向量），用 numpy.linalg.eig() 对矩阵做特征分解并验证 Av = λv |
| Day 5 | 理论 2h + 数学 2h | A股/美股/加密市场对比；协方差矩阵 | **金融**：对比 A 股与美股的关键差异（T+0 vs T+1、做空机制、注册制），了解港股通、QDII。对比加密市场与传统市场：全球统一市场、无休市、高波动、监管差异。**数学**：理解协方差的定义，手动计算 3 只股票收益率的协方差矩阵，用 numpy.cov() 验证，理解"协方差矩阵是半正定的"含义 |
| Day 6 | 编码 2h + 复习 2h | 数据获取实践（A股+加密）；周总结 | **编码**：项目环境已在 Day 1 搭建完毕（asdf + uv + jupyter）。今天在终端中 `uv add akshare ccxt` 安装数据源库。A股：注册 tushare pro 账号，拉取一只股票的历史数据并画出收盘价折线图。加密：用 ccxt 连接 Binance 拉取 BTC/USDT 日K数据并画出价格折线图，对比两个市场的波动率差异。**复习**：整理本周笔记，写一份"本周我学到了什么"总结 |

**本周检验**：能说清楚"股票是什么"、"A股怎么交易"、"加密货币市场和传统市场有什么区别"、"协方差矩阵的每个元素代表什么"

---

### 第 2 周：财务报表 + 概率统计复习

| 天 | 时间分配 | 学习内容 | 具体任务 |
|---|---------|---------|---------|
| Day 1 | 理论 2h + 数学 2h | 资产负债表；概率分布 | **金融**：可汗学院"Balance Sheet"系列视频，理解资产=负债+所有者权益，区分流动/非流动项目。找一家 A 股公司（如贵州茅台）的最新年报，找到资产负债表并标注主要科目。**数学**：复习离散分布（二项、泊松）和连续分布（正态、均匀），先 `uv add scipy` 安装 scipy，在 Jupyter 中用 scipy.stats 画出各分布的 PDF/CDF |
| Day 2 | 理论 2h + 数学 2h | 利润表；正态分布与中心极限定理 | **金融**：可汗学院"Income Statement"系列，理解营收→毛利→营业利润→净利润的层级关系，区分经常性损益与非经常性损益。**数学**：深入理解正态分布的性质（68-95-99.7 规则），用 Python 模拟中心极限定理：从均匀分布中重复抽样取均值，观察均值分布趋近正态 |
| Day 3 | 理论 2h + 数学 2h | 现金流量表；假设检验 | **金融**：可汗学院"Cash Flow Statement"系列，理解经营/投资/筹资三大类现金流，为什么"利润不等于现金"。**数学**：StatQuest 假设检验视频，理解零假设、备择假设、显著性水平 α、第一类/第二类错误，用 Python 实现一个简单的 z 检验 |
| Day 4 | 理论 2h + 数学 2h | 估值指标 PE/PB/PS；t 检验与 p 值 | **金融**：理解 PE（市盈率）= 股价/每股收益，PB（市净率）= 股价/每股净资产，PS（市销率）= 总市值/营业收入。用 akshare 获取沪深300成分股的 PE/PB 数据，观察分布。**数学**：StatQuest p 值视频，理解 t 分布与 t 检验（单样本/双样本），用 scipy.stats.ttest 做一个双样本 t 检验 |
| Day 5 | 理论 2h + 数学 2h | ROE 与杜邦分析；OLS 回归 | **金融**：理解 ROE = 净利润/净资产，杜邦分解 ROE = 利润率 × 资产周转率 × 权益乘数，对比 3 家不同行业公司的杜邦分解结果。**数学**：理解 OLS 回归原理（最小化残差平方和），推导正规方程 β = (X'X)⁻¹X'y，用 numpy 手动实现 OLS，再用 statsmodels.OLS 验证结果一致 |
| Day 6 | 编码 3h + 复习 1h | 实践整合；周总结 | **编码**：选择 3 家 A 股公司，用 akshare 获取其财务数据，计算 PE/PB/ROE，用 matplotlib 可视化对比。对一只股票的月收益率做正态性检验（Shapiro-Wilk），发现股票收益率的"肥尾"现象。**复习**：整理本周笔记 |

**本周检验**：能读懂一份真实年报的三张表，能用 Python 跑一个 OLS 回归并解读 R²、系数、p 值

---

### 第 3 周：投资组合理论 + 时间序列基础

| 天 | 时间分配 | 学习内容 | 具体任务 |
|---|---------|---------|---------|
| Day 1 | 理论 2h + 数学 2h | 收益率计算；时间序列概念 | **金融**：Bodie《投资学》第6章，理解简单收益率 vs 对数收益率（为什么量化常用对数收益率），用 pandas 计算一只股票的日/周/月收益率。**数学**：理解时间序列的基本概念：趋势、季节性、噪声、平稳性（严平稳 vs 宽平稳），用 matplotlib 画出股票价格序列和收益率序列，观察哪个更"平稳" |
| Day 2 | 理论 2h + 数学 2h | 风险度量；平稳性检验 | **金融**：Bodie《投资学》第6章续，理解标准差、方差、下行风险、VaR（在险价值）的定义和计算。用 Python 计算一只股票收益率的波动率（年化：日波动率 × √252）。**数学**：ADF 检验（Augmented Dickey-Fuller）的直觉理解，用 statsmodels.adfuller() 检验股票价格和收益率序列的平稳性 |
| Day 3 | 理论 2h + 数学 2h | 两资产组合与分散化；自相关 | **金融**：Bodie 第7章，理解两资产组合的收益和风险计算公式，理解相关系数如何影响分散化效果。用 Python 画出不同相关系数下两资产组合的风险-收益曲线。**数学**：理解自相关函数（ACF）和偏自相关函数（PACF），用 statsmodels.graphics 画出股票收益率的 ACF/PACF 图，观察是否存在显著自相关 |
| Day 4 | 理论 2h + 数学 2h | 马科维茨有效前沿；AR 模型 | **金融**：Bodie 第7章续，理解有效前沿的概念——所有最优风险-收益组合的集合。用 Python 对 5 只股票做蒙特卡洛模拟（随机生成 10000 组权重），画出可行集和有效前沿。**数学**：理解 AR(1) 模型 y_t = φy_{t-1} + ε_t，用 statsmodels.AutoReg 对收益率序列拟合 AR 模型，观察系数 |
| Day 5 | 理论 2h + 编码 2h | CAPM 模型 | **金融**：Bodie 第8-9章，理解 CAPM 公式 E(Ri) = Rf + βi(E(Rm) - Rf)，β 的含义（系统性风险暴露），α 的含义（超额收益）。**编码**：用 OLS 回归估计 5 只股票的 β 值（以沪深300为市场组合，以国债收益率为无风险利率），解读回归结果 |
| Day 6 | 编码 2.5h + 复习 1.5h | 绩效指标与阶段总结 | **编码**：实现以下指标的计算函数：年化收益率、年化波动率、夏普比率 Sharpe = (Rp-Rf)/σp、最大回撤、Calmar 比率。对沪深300过去3年的数据计算所有指标。**复习**：整理第一阶段全部笔记，确认掌握了所有基础概念。列出仍有疑惑的点，下周带着问题进入第二阶段 |

**本周检验**：能手动计算两资产组合的期望收益和标准差，能解释 CAPM 中 β=1.5 意味着什么，能用 Python 画出有效前沿

---

## 第二阶段：量化金融入门（第 4-6 周）

---

### 第 4 周：量化投资框架 + Python 量化工具链

| 天 | 时间分配 | 学习内容 | 具体任务 |
|---|---------|---------|---------|
| Day 1 | 理论 2h + 编码 2h | 量化投资概览 | **理论**：阅读石川《因子投资》第1章（什么是因子投资），了解量化投资的历史：从 Markowitz(1952) → CAPM(1964) → APT(1976) → Fama-French(1993) → 多因子时代。**编码**：在已有 `code/` 项目基础上扩展目录结构（`mkdir -p factor backtest utils`），`uv add seaborn mplfinance` 安装可视化库，用 Git 初始化仓库（`git init && git add . && git commit -m "init"`） |
| Day 2 | 理论 2h + 编码 2h | Alpha 与 Beta | **理论**：深入理解 Alpha（超额收益中不能被市场风险解释的部分）和 Beta（市场风险暴露），阅读石川《因子投资》第2章。思考：如果一个策略年化 20% 但 β=1.5，在市场涨 15% 的年份，它的 α 是多少？**编码**：用 akshare 获取沪深300全部成分股列表及 3 年日频行情数据，存入本地 CSV/Parquet 文件；`uv add python-binance` 安装 Binance API，用 ccxt 拉取 Top 50 加密货币的历史日频数据并存储。实现统一的数据加载模块 |
| Day 3 | 理论 2h + 编码 2h | 主动管理 vs 被动管理 | **理论**：理解指数基金（被动）vs 主动基金的区别，阅读 Sharpe "The Arithmetic of Active Management"（经典短文，2页），思考：为什么大多数主动基金跑不赢指数？**编码**：用 pandas 处理金融数据的核心技巧：日期索引、resample（日频→周频/月频）、pct_change 计算收益率、rolling 窗口计算移动均值/波动率 |
| Day 4 | 理论 2h + 编码 2h | 量化策略分类 | **理论**：了解主流量化策略类型——统计套利、CTA（趋势跟踪）、多因子选股、事件驱动、高频做市，对比各类策略的容量、频率、数据需求。加密市场的特殊策略类型：跨交易所套利、资金费率套利、DeFi 收益策略。**编码**：数据清洗实践——A股：处理停牌数据、复权价格、ST标记过滤。加密：处理交易所数据缺失、退市/归零币种（生存偏差）、不同交易所的价格差异 |
| Day 5 | 理论 2h + 编码 2h | 因子投资的定位 | **理论**：石川《因子投资》第3章，理解因子投资在整个量化体系中的定位——介于纯被动和纯主动之间的"系统化主动"。思考：加密市场因子投资与传统市场的区别——市场效率更低、数据质量更差、但可能存在更多 Alpha。**编码**：分别计算沪深300成分股和 Top 30 加密货币过去的日/月收益率矩阵，计算收益率相关矩阵并用 seaborn 热力图可视化。对比：A 股行业内相关性 vs 加密货币与 BTC 的相关性 |
| Day 6 | 编码 3h + 复习 1h | 数据可视化实践 | **编码**：完成以下可视化练习：(1) K 线图（用 mplfinance 库），(2) 收益率分布直方图 + 正态分布叠加，(3) 滚动 60 日波动率曲线，(4) 累计收益率对比图（个股 vs 沪深300）。**复习**：整理本周笔记和代码 |

**本周检验**：能清楚区分 Alpha 和 Beta，项目目录已建立，能流畅使用 pandas 处理 A 股数据

---

### 第 5 周：多因子模型理论

| 天 | 时间分配 | 学习内容 | 具体任务 |
|---|---------|---------|---------|
| Day 1 | 理论 2h + 编码 2h | CAPM 的局限性 | **理论**：阅读 Fama & French 1992 原始论文摘要和引言部分，理解 CAPM 的实证失败——小市值公司和高 B/M 公司的收益率无法被 β 单独解释。**编码**：从 Kenneth French Data Library 下载美股三因子月频数据（Mkt-Rf, SMB, HML），加载到 pandas 中，画出三个因子的累计收益曲线 |
| Day 2 | 理论 2h + 编码 2h | Fama-French 三因子模型 | **理论**：理解三因子模型 Ri-Rf = αi + βi(Rm-Rf) + si·SMB + hi·HML + εi，每个因子的构造方法（2×3 分组法），SMB = 小盘股平均收益 - 大盘股平均收益，HML 同理。**编码**：`uv add yfinance` 安装美股数据库，对 5 只美股做三因子回归，解读 α、β、s、h 系数和 R² |
| Day 3 | 理论 2h + 编码 2h | 三因子模型实证（A股+加密） | **理论**：阅读石川《因子投资》第4章关于 A 股因子的讨论，A 股三因子的构造方式和效果。思考：加密市场能否构造类似的因子？BTC 可以类比"市场因子"，市值分组可以构造 SMB，但 HML（价值因子）需要链上数据替代。**编码**：用 A 股数据自行构造 SMB 因子。同时用加密货币数据构造"加密版SMB"——按市值分为大币/小币两组计算收益差，对比两个市场的市值效应 |
| Day 4 | 理论 2h + 编码 2h | Carhart 四因子 + 动量 | **理论**：理解 Carhart (1997) 在三因子基础上加入动量因子 UMD (Up Minus Down)，动量效应的实证证据和行为金融解释（投资者对信息反应不足）。**编码**：构造 A 股动量因子 UMD——按过去12个月收益率（跳过最近1个月）排序分组，计算多空收益 |
| Day 5 | 理论 2h + 编码 2h | Fama-French 五因子模型 | **理论**：理解 FF5 新增的两个因子：RMW（盈利能力 Robust Minus Weak）和 CMA（投资风格 Conservative Minus Aggressive），阅读 Fama & French 2015 论文摘要。**编码**：下载 FF5 因子数据，对之前的 5 只股票做五因子回归，对比三因子和五因子的 R²，理解新因子是否带来解释力提升 |
| Day 6 | 理论 2h + 复习 2h | APT 套利定价理论 | **理论**：理解 APT 与 CAPM 的区别——APT 不要求市场组合的存在，允许多个系统性风险因子。APT 的核心假设：无套利。石川《因子投资》相关章节。**复习**：画一张思维导图，梳理 CAPM → 三因子 → 四因子 → 五因子 → APT 的演进脉络 |

**本周检验**：能写出三因子模型的公式并解释每个因子的经济含义，能自行构造 SMB/HML 因子

---

### 第 6 周：回测方法论 + 回测引擎

| 天 | 时间分配 | 学习内容 | 具体任务 |
|---|---------|---------|---------|
| Day 1 | 理论 2h + 编码 2h | 回测框架设计 | **理论**：理解回测的核心流程——数据准备→信号生成→组合构建→绩效评估。理解事件驱动 vs 向量化回测的区别（向量化更快但灵活性低）。**编码**：设计一个简单的向量化回测类 `Backtest`，包含方法：`set_signal()`、`run()`、`get_performance()`，先搭好骨架 |
| Day 2 | 理论 2h + 编码 2h | 前视偏差 | **理论**：深入理解前视偏差（Look-ahead Bias）——在回测中使用了在决策时点不可能获得的信息。常见陷阱：用未来数据做特征、用当期财报（实际公布有滞后）、用成分股当前列表而非历史列表。**编码**：实现回测类的 `run()` 方法——按月遍历，在每月末根据信号选股，计算下月收益 |
| Day 3 | 理论 2h + 编码 2h | 生存偏差 | **理论**：理解生存偏差（Survivorship Bias）——只用当前存活的股票做回测会高估策略表现（因为退市的差股票被排除了）。了解如何获取退市股票数据（tushare 可以获取已退市股票列表）。**编码**：实现绩效指标计算模块：年化收益率、年化波动率、夏普比率、最大回撤、Calmar比率、胜率、盈亏比 |
| Day 4 | 理论 2h + 编码 2h | 过拟合与数据窥探 | **理论**：这是最重要的一课。理解过拟合——策略在历史数据上表现很好但在未来不行。数据窥探（Data Snooping）——尝试太多参数组合，总能找到一个"好的"。阅读 Harvey et al. (2016) "...and the Cross-Section of Expected Returns" 了解多重检验问题。**编码**：演示过拟合：随机生成 1000 个"因子"（纯噪声），回测每个因子，展示即使是噪声也有大约 50 个因子看起来"显著" |
| Day 5 | 理论 1h + 编码 3h | 交易成本建模 | **理论**：理解交易成本的构成——佣金（A 股万2-万3）、印花税（卖出千1）、滑点（市场冲击）、冲击成本（大单移动价格）。**编码**：在回测框架中加入交易成本：(1) 佣金+印花税，(2) 滑点（假设固定比例如万5），(3) 计算换手率。对比有/无交易成本下策略的绩效差异 |
| Day 6 | 编码 2.5h + 复习 1.5h | 回测框架完善 + 阶段总结 | **编码**：完善回测框架，实现可视化输出——净值曲线、月度收益柱状图、回撤曲线、年度绩效表。用一个简单策略（如买入PE最低的50只股票）跑一遍完整回测流程。**复习**：整理第二阶段全部笔记和代码，确保回测框架可以复用到下一阶段。石川《因子投资》第5-6章 |

**本周检验**：有一个能用的回测框架，能解释三大偏差（前视、生存、过拟合）的具体例子

---

## 第三阶段：单因子研究（第 7-10 周）⭐ 核心阶段

---

### 第 7 周：市值因子 (Size)

| 天 | 时间分配 | 学习内容 | 具体任务 |
|---|---------|---------|---------|
| Day 1 | 理论 1.5h + 编码 2.5h | 市值因子文献 + 数据准备 | **理论**：阅读 Banz (1981) "The Relationship Between Return and Market Value of Common Stocks" 的核心结论，理解小盘股效应。阅读石川《因子投资》市值因子章节。**编码**：获取全 A 股（剔除 ST、上市不满 1 年）的月频数据：收盘价、流通市值、总市值、行业分类；获取 Top 100 加密货币的月频数据（市值、价格、交易量），`uv add requests` 安装 HTTP 库用于链上数据API调用。两个市场数据都存储为标准格式 |
| Day 2 | 理论 1h + 编码 3h | 因子构造 | **理论**：理解市值因子的构造选择——流通市值 vs 总市值，是否取对数，为什么取对数（消除右偏，让分布更接近正态）。**编码**：计算每月末每只股票的 ln(流通市值) 作为因子值，实现因子预处理函数：(1) 去极值（MAD 法或 3σ winsorize），(2) 标准化（z-score），(3) 缺失值处理 |
| Day 3 | 理论 1h + 编码 3h | IC 分析 | **理论**：深入理解 IC（Information Coefficient）= 截面上因子值与下期收益率的 Spearman 秩相关系数。IC > 0 表示因子值越大下期收益越高。IC 的经验判断标准：|IC均值| > 0.03 可关注，> 0.05 较好。**编码**：实现 IC 分析函数，计算市值因子的月度 IC 序列，统计 IC均值、IC标准差、IC_IR（= IC均值/IC标准差）、IC > 0 的比率（胜率），画出 IC 时间序列图 |
| Day 4 | 理论 1h + 编码 3h | 分组回测 | **理论**：理解分组回测方法——按因子值从小到大排序，等分为 5 组（或 10 组），每组内等权持有，每月调仓，观察各组收益的单调性。**编码**：实现分组回测函数，将全 A 股按市值因子分 5 组，计算每组的月度/年化收益、波动率、夏普比，画出 5 组的累计净值曲线，计算多空组合（第1组-第5组）的表现 |
| Day 5 | 理论 1h + 编码 3h | 深入分析 + 加密市场对比 | **理论**：A 股市值因子的特殊性——壳价值（小盘股因重组并购预期被高估），2017 年后小盘股效应减弱的原因（注册制改革、退市制度完善）。加密市场市值因子特殊性——小币波动极大但生存偏差严重（大量归零）。**编码**：A股分时段回测——分别看 2015 年前、2015-2018 年、2019 年至今市值因子表现。加密市场同样做市值因子研究——按市值排名分组回测。对比两个市场的市值效应差异 |
| Day 6 | 编码 2h + 总结 2h | 报告与代码整理 | **编码**：将因子研究流程（预处理→IC→分组回测→可视化）封装成通用模块 `factor_analysis.py`，使其可以接受任意因子作为输入。**总结**：撰写市值因子研究报告（Jupyter Notebook），包含：因子定义、构造方式、IC 统计、分组收益、结论与思考 |

**本周检验**：完成一份完整的市值因子研究报告，有一个可复用的因子分析模块

---

### 第 8 周：价值因子 (Value)

| 天 | 时间分配 | 学习内容 | 具体任务 |
|---|---------|---------|---------|
| Day 1 | 理论 1.5h + 编码 2.5h | 价值投资理论 + 数据准备 | **理论**：回顾 Graham 和 Buffett 的价值投资思想，理解价值因子的经济学解释——风险补偿说 vs 行为金融说。加密市场的"价值"概念：没有财报，但有链上指标——NVT（Network Value to Transactions，类似PE）、MVRV（Market Value to Realized Value）。**编码**：获取全 A 股的季度财务数据（每股净资产、每股收益、每股股利）；用 CoinGecko/Glassnode API 获取加密货币的链上数据（交易量、NVT等） |
| Day 2 | 理论 1h + 编码 3h | 构造 BP 因子 | **理论**：理解 BP（Book-to-Price，账面市值比）= 每股净资产/股价 = 1/PB。BP 越高说明越"便宜"。注意使用最新可获得的财务数据（避免前视偏差）。**编码**：构造 BP 因子：用最近一期已公布的每股净资产 / 月末收盘价。处理负净资产的情况（剔除）。对 BP 做预处理（去极值、标准化）。画出 BP 因子的截面分布 |
| Day 3 | 理论 1h + 编码 3h | 构造 EP 和 DP 因子 | **理论**：理解 EP（Earnings-to-Price）= 每股收益/股价，DP（Dividend-to-Price）= 每股股利/股价。不同价值指标适用的场景不同——EP 对亏损公司无意义，DP 对不分红公司无意义。**编码**：分别构造 EP 和 DP 因子，用同样的预处理流程处理。计算 BP、EP、DP 三个因子之间的截面相关系数，了解它们的重合度 |
| Day 4 | 理论 0.5h + 编码 3.5h | IC 分析与分组回测 | **编码**：对 BP 因子做完整的 IC 分析（复用第 7 周的通用模块），对比 IC均值、IC_IR。做 5 组分组回测，画出净值曲线。对 EP 和 DP 因子重复同样的分析流程 |
| Day 5 | 理论 1h + 编码 3h | 行业中性化 | **理论**：理解行业中性化的必要性——不同行业天然有不同的估值水平（银行 PB 普遍低，科技股 PB 普遍高），不中性化会导致因子退化为行业因子。中性化方法：在每个行业内部做 z-score 标准化。**编码**：实现行业中性化函数，对 BP 因子做行业中性化处理，对比中性化前后的 IC 和分组回测结果 |
| Day 6 | 编码 2h + 总结 2h | 综合价值因子 + 加密价值因子 + 报告 | **编码**：A股：将 BP、EP、DP 三个子因子等权合成一个综合价值因子，做 IC 分析和分组回测。加密：构造 NVT 因子（网络价值/链上交易量），对 Top 50 币种做 IC 分析和分组回测。**总结**：撰写价值因子研究报告（Jupyter Notebook），对比传统价值因子和链上价值因子的异同 |

**本周检验**：理解行业中性化的原理和必要性，完成价值因子研究报告

---

### 第 9 周：动量因子 (Momentum)

| 天 | 时间分配 | 学习内容 | 具体任务 |
|---|---------|---------|---------|
| Day 1 | 理论 2h + 编码 2h | 动量效应文献 | **理论**：阅读 Jegadeesh & Titman (1993) 的核心结论——过去 3-12 个月表现好的股票在未来 3-12 个月倾向于继续表现好。行为金融解释：投资者对信息反应不足（underreaction）。了解动量崩溃（Momentum Crash）——2009年3月的动量策略巨亏。**编码**：计算全 A 股每只股票过去 N 月的累计收益率（N = 1, 3, 6, 12），注意跳过最近1个月（避免短期反转效应的干扰） |
| Day 2 | 理论 0.5h + 编码 3.5h | 构造动量因子 | **编码**：构造标准动量因子 MOM_12_1 = 过去12个月收益率（跳过最近1月）。预处理（去极值、标准化）。同时构造 MOM_6_1、MOM_3_1 用于对比。处理数据不足的情况（上市不满12个月的剔除）。画出动量因子值的截面分布和时序变化 |
| Day 3 | 理论 0.5h + 编码 3.5h | 不同窗口对比 | **编码**：对 MOM_12_1、MOM_6_1、MOM_3_1 分别做 IC 分析，对比不同回看窗口的 IC均值 和 IC_IR。做分组回测，对比各窗口下的多空收益。在 A 股中，哪个窗口的动量效应最强？（A 股动量效应通常弱于美股，甚至可能呈现反转） |
| Day 4 | 理论 1h + 编码 3h | 动量崩溃分析 | **理论**：理解动量崩溃的机制——在市场大幅反弹时，之前的输家股票暴涨，赢家股票涨幅较小，导致多空组合巨亏。了解"动量因子与市场波动率负相关"。**编码**：找到 A 股历史上动量因子表现最差的月份，分析当时的市场环境（如 2015年股灾后的反弹、2019年初的反弹） |
| Day 5 | 理论 1h + 编码 3h | 短期反转因子 | **理论**：理解短期反转效应——过去 1 个月跌得多的股票下个月倾向于反弹。这与动量效应方向相反。解释：流动性冲击导致的短期过度反应。**编码**：构造反转因子 REV_1M = -过去1个月收益率，做 IC 分析和分组回测。对比动量因子与反转因子的表现，画出两者的 IC 时间序列对比图 |
| Day 6 | 编码 1.5h + 总结 2.5h | 报告与反思 | **编码**：综合分析：动量在 A 股的有效性如何？是否需要修改构造方式（如行业内动量、风险调整动量）？**总结**：撰写动量因子研究报告，重点讨论"A 股动量效应弱/反转效应强"的现象及可能原因 |

**本周检验**：理解动量因子和反转因子的区别，理解 A 股和美股在动量效应上的差异

---

### 第 10 周：质量因子 (Quality) + 框架整合

| 天 | 时间分配 | 学习内容 | 具体任务 |
|---|---------|---------|---------|
| Day 1 | 理论 1.5h + 编码 2.5h | 质量因子定义 | **理论**：理解质量因子的多维含义——盈利能力（高 ROE）、盈利稳定性（ROE 波动低）、财务健康（低杠杆）、盈利质量（经营性现金流/净利润高）。阅读 Asness et al. (2019) "Quality Minus Junk"。加密市场的"质量"：链上活跃度（日活地址数）、开发者活动（GitHub commits）、协议收入、TVL稳定性。**编码**：获取全 A 股的 ROE（TTM）、资产负债率等数据；获取加密货币链上活跃度数据 |
| Day 2 | 理论 0.5h + 编码 3.5h | 构造 ROE 因子 | **编码**：构造 ROE_TTM 因子（最近4个季度 ROE 之和），注意使用最近可获得的财报数据。对 ROE 做预处理。做 IC 分析和分组回测。思考：ROE 因子与价值因子（BP）的关系是什么？（高 ROE 通常对应低 BP，即好公司往往不便宜） |
| Day 3 | 理论 0.5h + 编码 3.5h | 盈利稳定性与杠杆因子 | **编码**：构造盈利稳定性因子 = -过去8个季度 ROE 的标准差（负号表示越稳定因子值越大）。构造低杠杆因子 = -资产负债率。分别做 IC 分析和分组回测 |
| Day 4 | 理论 0.5h + 编码 3.5h | 综合质量因子 | **编码**：将 ROE、盈利稳定性、低杠杆三个子因子各自标准化后等权合成综合质量因子。做 IC 分析和分组回测。对比综合因子与单因子的效果 |
| Day 5 | 编码 4h | 单因子框架代码重构 | **编码**：回顾过去4周的代码，重构为标准化工具包。核心模块：(1) `data_loader.py`：统一的数据加载与清洗（支持A股和加密数据），(2) `factor_builder.py`：因子构造（预处理、中性化），(3) `factor_analyzer.py`：IC 分析、分组回测，(4) `performance.py`：绩效指标计算（注意加密市场用365天年化，A股用252天），(5) `visualizer.py`：标准可视化模板。确保对任意新因子（无论是A股还是加密），只需调用 3-5 行代码即可完成全套分析 |
| Day 6 | 总结 4h | 四因子横向对比 + 阶段总结 | **总结**：撰写质量因子研究报告。制作四因子横向对比表：IC均值、IC_IR、年化多空收益、最大回撤、夏普比——**A 股和加密市场各做一张表**。讨论：哪些因子在 A 股更有效？哪些在加密市场更有效？传统因子迁移到加密市场的效果如何？写一份第三阶段总结文档 |

**本周检验**：有一个重构后的标准因子研究工具包，完成全部4个因子的研究报告

---

## 第四阶段：多因子组合（第 11-13 周）

---

### 第 11 周：因子合成

| 天 | 时间分配 | 学习内容 | 具体任务 |
|---|---------|---------|---------|
| Day 1 | 理论 2h + 编码 2h | 因子相关性分析 | **理论**：理解因子合成的目标——将多个有效因子合并为一个更稳定、更有效的综合因子。理解因子间的相关性和冗余问题。**编码**：计算4个因子（市值、价值、动量、质量）两两之间的截面相关系数（每月一个相关矩阵），计算时间序列上的平均相关系数，用热力图可视化 |
| Day 2 | 理论 1.5h + 编码 2.5h | 等权合成 | **理论**：最简单的合成方法——将每个因子标准化后等权相加。优点：简单、稳健；缺点：没有利用因子效力差异。**编码**：实现等权合成，将4个标准化因子等权加和得到综合因子，做 IC 分析和分组回测，与单因子结果对比 |
| Day 3 | 理论 1.5h + 编码 2.5h | IC 加权合成 | **理论**：用过去 N 个月的 IC 均值作为各因子的权重——IC 越高的因子权重越大。滚动窗口的选择（如过去 12 个月或 24 个月）。**编码**：实现滚动 IC 加权合成（如用过去 12 个月的 IC 均值作为权重），做 IC 分析和分组回测，与等权合成对比 |
| Day 4 | 理论 1.5h + 编码 2.5h | IC_IR 加权 + 最大化 IC_IR | **理论**：IC_IR 加权的直觉——不仅考虑 IC 的大小（预测能力），还考虑 IC 的稳定性。最优权重正比于 IC_IR。理解最大化 IC_IR 等价于最大化信息比率。**编码**：实现 IC_IR 加权合成，对比三种合成方法的效果 |
| Day 5 | 理论 1.5h + 编码 2.5h | 因子正交化 | **理论**：理解因子正交化的意义——消除因子间的共线性，使每个因子贡献独立的信息。方法：对称正交（Canonical）或 Gram-Schmidt 正交。**编码**：实现 Gram-Schmidt 正交化，对4个因子做正交化处理，对比正交化前后因子相关性矩阵的变化。用正交化后的因子做等权合成并回测 |
| Day 6 | 编码 2h + 总结 2h | 合成方法对比 + 总结 | **编码**：制作合成方法对比表——等权、IC加权、IC_IR加权、正交化后等权，对比 IC均值、IC_IR、年化多空收益、夏普比。**总结**：选择最优合成方法，讨论各方法的适用场景，整理代码 |

**本周检验**：理解各种因子合成方法的原理和优缺点，能根据数据选择合适的合成方法

---

### 第 12 周：组合优化

| 天 | 时间分配 | 学习内容 | 具体任务 |
|---|---------|---------|---------|
| Day 1 | 理论 2h + 编码 2h | 均值方差优化 | **理论**：回顾 Markowitz 均值方差框架，目标函数 max w'μ - λ/2 · w'Σw，理解 λ（风险厌恶系数）的含义。优化的输入：期望收益向量 μ、协方差矩阵 Σ。**编码**：scipy 已在第 2 周安装过，在 Jupyter 中用 scipy.optimize.minimize 实现均值方差优化（最大化夏普比率），对 10 只股票的月度数据做优化，得到最优权重 |
| Day 2 | 理论 1h + 编码 3h | 约束条件 | **理论**：实际投资中的约束——做多约束（权重≥0）、仓位集中度约束（单只≤5%）、行业约束、换手率约束。**编码**：在均值方差优化中加入约束条件——所有权重 ≥ 0，单只股票权重 ≤ 5%，权重之和 = 1。对比有/无约束的优化结果。体验"估计误差放大"问题——样本协方差矩阵的估计误差会导致优化结果极端 |
| Day 3 | 理论 2h + 编码 2h | 风险平价模型 | **理论**：理解风险平价（Risk Parity）的核心思想——让每个资产对组合总风险的贡献相等，而非让权重相等。风险贡献的计算：RCi = wi · (Σw)i / (w'Σw)。**编码**：实现风险平价优化——目标函数为最小化各资产风险贡献与目标风险贡献（1/N）的偏差。对比等权组合、均值方差组合和风险平价组合的表现 |
| Day 4 | 理论 2h + 编码 2h | Black-Litterman 模型 | **理论**：理解 BL 模型的动机——解决均值方差优化对 μ 估计过于敏感的问题。核心思想：以市场均衡收益为"先验"，用投资者的观点做"后验"修正。公式推导：后验期望 = 先验 + 调整项。**编码**：实现简化版 BL 模型——用市值权重反推均衡收益作为先验，加入"因子得分高的股票预期收益更高"的观点，计算后验期望收益和优化权重 |
| Day 5 | 理论 1h + 编码 3h | 优化方法对比 | **编码**：构建一个完整的多因子选股策略回测——每月末用综合因子得分选股（前 50 只），分别用以下方法确定权重：(1) 等权，(2) 因子得分加权，(3) 均值方差优化，(4) 风险平价，(5) BL 模型。对比 5 种方法在过去 5 年的绩效表现。加入换手率和交易成本分析 |
| Day 6 | 理论 1h + 总结 3h | 实践问题与总结 | **理论**：了解组合优化的实践挑战——协方差矩阵估计不稳定、优化结果对输入敏感、换手率过高。解决方案：正则化、收缩估计、换手率惩罚。**总结**：整理组合优化代码模块，撰写对比分析报告 |

**本周检验**：能实现至少3种组合优化方法，理解各方法的优缺点和适用场景

---

### 第 13 周：风险模型 + 完整策略

| 天 | 时间分配 | 学习内容 | 具体任务 |
|---|---------|---------|---------|
| Day 1 | 理论 2.5h + 编码 1.5h | Barra 风险模型概述 | **理论**：理解 Barra 多因子风险模型的框架——将股票收益分解为：公共因子收益（风格因子+行业因子）+ 特异收益。模型形式：r = Xf + u，X 是因子暴露矩阵，f 是因子收益向量，u 是特异收益。理解风格因子（市值、估值、动量、波动率等）和行业因子（哑变量）。**编码**：构建简化版因子暴露矩阵 X（4个风格因子 + 中信一级行业哑变量） |
| Day 2 | 理论 1.5h + 编码 2.5h | 协方差矩阵估计 | **理论**：理解样本协方差矩阵的问题——当股票数 N > 时间期数 T 时，样本协方差矩阵是奇异的。收缩估计（Shrinkage）的思想：在样本协方差和一个结构化目标（如对角阵）之间做加权平均。**编码**：`uv add scikit-learn` 安装 sklearn，在 Jupyter 中实现 Ledoit-Wolf 收缩估计（sklearn.covariance.LedoitWolf），对比样本协方差和收缩协方差的特征值分布，观察收缩的"正则化"效果 |
| Day 3 | 理论 1h + 编码 3h | 结构化风险模型 | **编码**：实现结构化协方差矩阵估计——Σ = XFX' + Δ，其中 F 是因子收益的协方差矩阵（维度小，估计更稳定），Δ 是特异风险的对角矩阵。步骤：(1) 用截面回归估计每月的因子收益 f，(2) 计算因子收益的时序协方差 F，(3) 计算残差的方差 Δ |
| Day 4 | 理论 1h + 编码 3h | 风险归因 | **理论**：理解风险归因——将组合的总风险分解为各因子贡献和特异风险贡献。收益归因——将组合的超额收益分解为各因子选择的贡献。**编码**：对第12周构建的多因子组合做风险归因——计算市值因子、价值因子、动量因子、质量因子各自贡献了多少风险和多少收益 |
| Day 5 | 编码 4h | 完整多因子策略 | **编码**：整合前几周的所有模块，构建完整的多因子选股策略——(1) 每月末计算全A股的4个因子值，(2) IC_IR 加权合成综合因子，(3) 选综合因子排名前 50 的股票，(4) 用风险平价确定权重（或等权），(5) 加入交易成本（佣金+印花税+滑点），(6) 计算全套绩效指标和风险归因。在过去5年数据上做完整回测 |
| Day 6 | 总结 4h | 第四阶段总结 | **总结**：撰写完整策略报告——策略逻辑、因子描述、回测结果、风险归因、与基准（沪深300）的对比。讨论：策略的优势和劣势、可能的改进方向、实盘部署需要注意的问题。整理全部代码，确保模块化、可维护 |

**本周检验**：有一个完整的多因子选股策略，从因子构造到组合优化到风险归因全流程打通

---

## 第五阶段：进阶与实战（第 14-16 周）

---

### 第 14 周：另类因子探索

| 天 | 时间分配 | 学习内容 | 具体任务 |
|---|---------|---------|---------|
| Day 1 | 理论 1h + 编码 3h | 低波动因子 | **理论**：理解低波动异象（Low Volatility Anomaly）——低波动股票的风险调整后收益优于高波动股票，与传统金融理论（高风险高收益）矛盾。解释：彩票偏好、杠杆约束。**编码**：构造低波动因子 = -过去 252 个交易日收益率的标准差，做完整的因子研究流程（IC + 分组回测） |
| Day 2 | 理论 1h + 编码 3h | 换手率/流动性因子 | **理论**：理解非流动性溢价——流动性差的股票需要更高的收益率补偿。Amihud (2002) 非流动性指标。**编码**：构造换手率因子 = -过去 20 日平均换手率（低换手率为正），构造 Amihud 非流动性因子，分别做因子研究 |
| Day 3 | 理论 1h + 编码 3h | SUE 因子（盈利意外） | **理论**：理解 PEAD（Post-Earnings Announcement Drift）——财报公布后，如果盈利超预期，股价会继续漂移上涨，反之亦然。SUE = (实际EPS - 预期EPS) / 标准差。**编码**：用历史 EPS 的季节性随机游走模型构造简化版 SUE 因子（如用当季 EPS - 去年同期 EPS），做因子研究 |
| Day 4 | 理论 1h + 编码 3h | 技术面因子 + 加密独有因子 | **编码**：A股/加密通用技术因子：(1) 20日均线偏离度，(2) 波动率变化率，(3) 成交量变化率。加密独有因子：(4) 资金费率（Funding Rate）——永续合约多空情绪，(5) 交易所净流入/流出——巨鲸动向。做因子研究，讨论各类因子的 IC 衰减速度 |
| Day 5 | 理论 1h + 编码 3h | 另类因子评估 | **编码**：将本周研究的新因子与之前的4个经典因子做相关性分析——新因子是否提供了额外的独立信息？将有效的新因子加入多因子框架，测试综合策略是否改善 |
| Day 6 | 总结 4h | 因子研究总结 | **总结**：制作所有研究过的因子的汇总表（IC均值、IC_IR、多空夏普、与其他因子相关性），筛选出在 A 股最有效的因子组合。撰写总结报告 |

**本周检验**：对"什么因子在 A 股有效"有自己的判断，因子库扩展到 7-8 个

---

### 第 15 周：机器学习与因子

| 天 | 时间分配 | 学习内容 | 具体任务 |
|---|---------|---------|---------|
| Day 1 | 理论 2h + 编码 2h | ML 在量化中的应用 | **理论**：了解 ML 在量化投资中的三大应用场景——(1) 因子非线性合成（用 ML 替代线性加权），(2) 收益率预测，(3) 组合优化。阅读 López de Prado《Advances in Financial Machine Learning》第1-2章。**编码**：sklearn 已在第 13 周安装过，在 Jupyter 中复习 sklearn 基本流程——数据划分（时间序列不能随机划分！）、特征标准化、模型训练、预测、评估 |
| Day 2 | 理论 1h + 编码 3h | XGBoost 因子合成 | **编码**：`uv add xgboost` 安装 XGBoost。用 XGBoost 做因子非线性合成——特征 = 各因子值，标签 = 下期收益率。关键细节：(1) 必须用滚动窗口训练（如用过去24个月数据训练，预测下个月），(2) 使用排名而非原始收益率作为标签（减少噪声），(3) 调参（max_depth=3-5，防止过拟合）。对比 XGBoost 合成与线性合成的 IC 和分组回测 |
| Day 3 | 理论 1h + 编码 3h | LightGBM + 特征工程 | **编码**：`uv add lightgbm` 安装 LightGBM。用 LightGBM 替代 XGBoost（通常更快），添加特征工程：因子的交互项（如 Value × Quality）、因子的历史变化率。分析特征重要性（feature_importance），理解哪些因子和交互项贡献最大 |
| Day 4 | 理论 1.5h + 编码 2.5h | 过拟合防控 | **理论**：ML 在金融中的最大挑战——信噪比极低，极易过拟合。防控方法：交叉验证的时序版本（Purged K-Fold，embargo），样本外测试的严格分离，模型复杂度控制。**编码**：实现 Purged K-Fold 交叉验证，对比不同模型复杂度（max_depth=2 vs 5 vs 10）在样本内和样本外的表现差异 |
| Day 5 | 理论 1h + 编码 3h | ML vs 线性模型 | **编码**：做一个严格的对比实验——(1) 线性等权合成，(2) IC_IR 加权合成，(3) XGBoost 合成，(4) LightGBM 合成。使用相同的数据和评估方法（相同的样本外测试期），对比 IC均值、IC_IR、分组回测。讨论：ML 是否带来了显著提升？在什么条件下 ML 更有优势？ |
| Day 6 | 理论 2h + 总结 2h | 因子衰减与拥挤度 | **理论**：理解因子拥挤（Factor Crowding）——当太多投资者使用同一个因子时，因子的超额收益会被竞争掉。因子衰减的表现：IC 随时间下降。监控方法：滚动 IC、因子估值差（价值因子多空组合的估值差距缩小说明拥挤）。**总结**：撰写 ML 因子合成实验报告 |

**本周检验**：能用 XGBoost/LightGBM 做因子合成并防止过拟合，对 ML 方法有客观认识（不迷信也不排斥）

---

### 第 16 周：实战部署 + 总结

| 天 | 时间分配 | 学习内容 | 具体任务 |
|---|---------|---------|---------|
| Day 1 | 编码 4h | 策略部署到量化平台 | **编码**：A股：注册聚宽 (JoinQuant) 或米筐 (RiceQuant) 账号，学习平台 API，将多因子策略移植到平台回测。加密：在 Binance Testnet（测试网）上配置 API Key，用 ccxt 的 sandbox 模式连接测试环境，验证策略的交易逻辑 |
| Day 2 | 编码 4h | 模拟盘运行 | **编码**：A股：在量化平台上设置模拟盘，让策略每月自动调仓。加密：编写一个简单的自动调仓脚本（用 ccxt 下单），先在 Testnet 上运行。配置策略监控——记录持仓和净值。分析策略在模拟盘中的表现，观察"回测→模拟→实盘"的差距来源 |
| Day 3 | 理论 2h + 编码 2h | 实盘注意事项（A股+加密） | **理论**：A股实盘差距——流动性、冲击成本、涨跌停、停复牌。加密实盘差距——交易所宕机/维护、API限流、不同交易所价格差异、提币延迟、智能合约风险（DEX）。**编码**：A股回测加入限制（涨跌停、停牌、低成交额过滤）。加密回测加入限制（剔除日成交额低于阈值的币种、考虑交易所手续费阶梯） |
| Day 4 | 编码 4h | 策略优化与参数敏感性 | **编码**：对完整策略做参数敏感性分析——(1) 持仓数量（30/50/100只），(2) 调仓频率（月度/双周），(3) 因子合成方法，(4) 选股范围（全A/沪深300/中证500）。画出各参数对夏普比率的影响曲线，确认策略对参数不过度敏感 |
| Day 5 | 编码 2h + 总结 2h | WorldQuant Brain 体验 | **编码**：注册 WorldQuant Brain 平台，了解其 Alpha 表达式语法。将自己研究过的一个因子用 WQ Brain 的语法表达出来并提交。体验 Alpha 研究的工业化流程。**总结**：回顾整个 16 周的学习路径，列出自己掌握的知识和技能清单 |
| Day 6 | 总结 4h | 最终总结与后续规划 | **总结**：(1) 整理全部代码仓库，写 README。(2) 整理全部研究报告为一个系列（A股和加密各一套）。(3) 制定下一步学习/研究方向——深入加密独有因子（链上数据、DeFi指标）？学习更高频的加密策略？研究跨市场因子（加密+传统联动）？(4) 评估是否具备用小资金做实盘的条件——加密市场门槛更低，可以先从加密实盘开始 |

**本周检验**：策略在量化平台上运行，有模拟盘在跑，对"下一步做什么"有清晰方向

---

## 附录：每周自检清单

每周日（休息日）花 30 分钟完成：

- [ ] 本周计划的内容是否全部完成？未完成的原因？
- [ ] 写了几行代码？是否 push 到 Git？
- [ ] 遇到的最大困难是什么？是否已解决？
- [ ] 下周学习最期待什么？最担心什么？
- [ ] 回顾一个本周学到的概念，能否用一句话向外行解释？
